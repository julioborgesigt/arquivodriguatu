<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerar Procedimento e Consultar Movimenta√ß√£o</title>

    <!-- Incluindo bibliotecas jsPDF e QR Code -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"></script>

    <!-- Incluindo a biblioteca HTML5 QR Code -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5-qrcode/2.3.8/html5-qrcode.min.js"></script>

    <!-- Arquivo de Estilos CSS Externo -->
    <link rel="stylesheet" href="style.css">


    <!-- Arquivo JS -->
    <script src="script.js" defer></script>
    
</head>
<body>


    <div>
        <!-- Formul√°rio de Login/Cadastro -->
        <div id="auth-container">
                <h2>Login ou Cadastro</h2>
            <form id="auth-form">
                    <label for="username">Usu√°rio:</label>
                    <input type="text" id="username" name="username" required>
                    <label for="password">Senha:</label>
                    <input type="password" id="password" name="password" required>
                    <button type="button" onclick="login()">Entrar</button>
                    <button type="button" onclick="register()">Cadastrar</button>
                    <!-- Bot√£o Administrador -->
                    <button type="button" id="admin-btn" onclick="window.location.href='/login_admin.html'">Administrador</button>
            </form>
        </div>

        <!-- Interface ap√≥s login -->
        <div id="app-container" style="display: none;">
                    
                


            <div id="main-container">
                        
                <h2>Bem-vindo, <span id="user-name"></span></h2>
                
                
                    <form id="botoesadm-form">
                        <!-- Bot√£o de logout -->
                        <button class="btn-form" id="botao-logout" type="button" onclick="logout()">Sair</button>
                    </form>
                    

                


                    <div id="gerarPDF-form" class="formulario">

                             
                         <form>
                            <div class="gerarpdf-container">

                                <h2>Gerar capa de procedimento</h2> 
                                <div>
                                                <!-- Gerar Procedimento -->
                                        
                                            
                                                <div class="select-container">
                                                    <label for="tipo-procedimento">Tipo de Procedimento:</label>
                                                    <select id="tipo-procedimento" name="tipo-procedimento" required>
                                                        <option value="BO">BO</option>
                                                        <option value="TC">TC</option>
                                                        <option value="AI">AI</option>
                                                        <option value="IP">IP</option>
                                                    </select>
                                                </div>
                                            


                                               
                                                <label for="procedimento">N√∫mero do Procedimento:</label>
                                                <input type="text" id="procedimento" name="procedimento" placeholder="xxx-xxxxx/xxxx" required>

                                                <label for="autor-investigado">Autor/Investigado:</label>
                                                <input type="text" id="autor-investigado" name="autor-investigado" placeholder="Nome do Autor/Investigado">

                                                <label for="assunto">Assunto:</label>
                                                <input type="text" id="assunto" name="assunto" placeholder="Assunto">

                                                <label for="vitima">V√≠tima:</label>
                                                <input type="text" id="vitima" name="vitima" placeholder="Nome da V√≠tima">




                                                <button class="btn-form" id="botao-gerar" type="button" onclick="gerarPDF()">Gerar PDF</button>
                                            
                                </div>
                            </div>
                        </form>
                        
                
                    </div>



                    <div id="lerQrcode-form" class="formulario">
                        <h3>Ler QR Code</h3>
                        <form>
                            <!-- Conte√∫do espec√≠fico de Ler QR Code -->
                            <button type="button" onclick="window.location.href='leitor_qrcode.html'">Ler QR Code</button>
                            
                        </form>
                    </div>
            



                        <div id="consultarMovimentacao-form" class="formulario">
                        
                        

                            <div class="selecteresultado-container">
                                <!-- Consultar Movimenta√ß√£o -->
                                <h2>Consultar movimenta√ß√£o</h2>
                                <div class="select-container">
                                    <label for="consulta-tipo-procedimento">Tipo de Procedimento:</label>
                                    <select id="consulta-tipo-procedimento" name="consulta-tipo-procedimento" required>
                                        <option value="BO">BO</option>
                                        <option value="TC">TC</option>
                                        <option value="AI">AI</option>
                                        <option value="IP">IP</option>
                                    </select>
                                
                                <label for="consulta-tipo-procedimento">N√∫mero do Procedimento:</label>
                                <input type="text" id="consulta-procedimento" name="consulta-procedimento" placeholder="xxx-xxxxx/xxxx" required>
                                <button class="btn-form" type="button" onclick="consultarMovimentacao()">Consultar</button>
                                </div>

                                <div id="resultado-consulta"></div>
                            </div>


                            <div class="pesquisaeresultado-container">

                                <!-- Campo de pesquisa por login -->
                                <div class="pesquisa-container">
                                    <h2>Pesquisar processos por matr√≠cula</h2>
                                    <label for="login-pesquisa">N√∫mero do Login:</label>
                                    <input type="text" id="login-pesquisa" placeholder="Digite o n√∫mero do login">
                                    <button class="btn-form" type="button" onclick="pesquisarPorLogin()">Pesquisar</button>
                                </div>

                                    <div id="resultado-pesquisa">
                                    <!-- Resultados da pesquisa ser√£o exibidos aqui -->
                                    </div>

                            </div>
                        
                        </div>
            




                    <div id="transferirProcesso-form" class="formulario">
                
                        <form>


                            <div id="leituraTransferencia-form" class="formulario-container" >
                                <h2>Transferir Procedimentos por QR Code</h2>
                                <label for="login-destinatario">Login do Destinat√°rio:</label>
                                <input type="text" id="login-destinatario" placeholder="Digite o login do destinat√°rio" required>
                                <button type="button" id="iniciarLeitura" onclick="iniciarLeituraTransferencia()">Iniciar Leitura</button>

                                <div id="qr-readerlimiter" style="display: none;" >

                                <div id="qr-reader"></div>
                                
                                </div>

                                <ul id="procedimentos-lista"></ul>
                                <button type="button" id="finalizarLeitura" style="display: none;" onclick="finalizarTransferencia()">Finalizar</button>
                            </div>






                            <div class="transferir-container">

                                
                                
                                





                                <h2>Transferir procedimento</h2>
                             
                                <div class="select-container">
                                    <label for="tipo-transferencia">Tipo de Procedimento:</label>
                                    <select id="tipo-transferencia" name="tipo-transferencia" required>
                                        <option value="BO">BO</option>
                                        <option value="TC">TC</option>
                                        <option value="AI">AI</option>
                                        <option value="IP">IP</option>
                                    </select>
                                </div>
                    
                    
                                <label for="login-transferencia">N√∫mero do Login do Destinat√°rio:</label>
                                <input type="text" id="login-transferencia" placeholder="Digite o n√∫mero de login">
                    
                    
                                <label for="procedimento-transferencia">N√∫mero do Processo:</label>
                                <input type="text" id="procedimento-transferencia" placeholder="xxx-xxxxx/xxxx">
                                <button class="btn-form" type="button" onclick="solicitarTransferencia()">Solicitar Transfer√™ncia</button>
                            

                            </div>


                            <div class="solicitacoes-container">

                                <h2>Solicita√ß√µes de transfer√™ncia pendentes</h2>
                                <div id="solicitacoes-pendentes"></div>
                                
                        
                                
                                <button class="btn-form" type="button" onclick="verificarSolicitacoes()">Verificar Solicita√ß√µes</button>
                                
                                <div id="solicitacoes-pendentes">
                                    <!-- As solicita√ß√µes pendentes ser√£o carregadas aqui -->
                                </div>
                            

                            </div>


                        </form>
                    </div>
            

                    
                        <div id="converter-form" class="formulario">
                            
                            <form>
                                <div class="conversao-container">
                                <!-- Formul√°rio de convers√£o -->
                                <h2>Convers√£o de procedimento</h2>
                            
                                    <label for="numero-converter">N√∫mero do Procedimento:</label>
                                    <input type="text" id="numero-converter" placeholder="Ex.: 123-45678/2024">

                                    <label for="antigo-tipo">Antigo Tipo de Procedimento:</label>
                                    <select id="antigo-tipo">
                                        <option value="BO">BO</option>
                                        <option value="TC">TC</option>
                                        <option value="AI">AI</option>
                                        <option value="IP">IP</option>
                                    </select>

                                    <label for="novo-tipo">Novo Tipo de Procedimento:</label>
                                    <select id="novo-tipo">
                                        <option value="BO">BO</option>
                                        <option value="TC">TC</option>
                                        <option value="AI">AI</option>
                                        <option value="IP">IP</option>
                                    </select>

                                    <label for="novo-numero">Nova Numera√ß√£o do Procedimento:</label>
                                    <input type="text" id="novo-numero" placeholder="Ex.: 123-45678/2024">

                                    <button class="btn-form" onclick="converterProcedimento()">Confirmar Convers√£o</button>
                                </div>
                            </form>
                        </div>
                    
        
            </div>
        
            <!-- Barra inferior de navega√ß√£o -->
            <div class="bottom-nav">
                <button onclick="mostrarFormulario('gerarPDF-form')"><i class="fas fa-file-pdf">üìÑ</i>Gerar</button>
                <button onclick="window.location.href='/leitor_qrcode.html'"><i class="fas fa-file-pdf">üì∑</i>Ler Qr</button>
                <button onclick="mostrarFormulario('consultarMovimentacao-form')"><i class="fas fa-file-pdf">üîç</i>Cons.</button>
                <button onclick="mostrarFormulario('transferirProcesso-form')"><i class="fas fa-file-pdf">üîÑ</i>Transf.</button>
                <button onclick="mostrarFormulario('converter-form')"><i class="fas fa-file-pdf">üîÑ</i>Conver.</button>
            </div>
    
   
        </div>
   
    </div>
 
</body>
</html>
